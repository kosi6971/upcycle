<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upcycling Introduction</title>
    <link rel="stylesheet" href="../css/intro.css">
    <link rel="stylesheet" href="../css/gallery.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/masonry/4.2.2/masonry.pkgd.min.js"></script>
    <style>
        
    </style>
</head>

<body>
    <!-- header 구역 -->
    <header class="headBody subHead">
        <div class="inBox">
            <a href="../html/intro.html">
                <img src="../img/logo_2.png" alt="로고">
                <h1>HEYDAY</h1>
            </a>
            <ul id="headLine">
                <li class="headMenuBtn">
                    <a href="../html/intro.html"><div>HOME</div></a>
                </li>
                <li class="headMenuBtn">
                    <div>PRODUCT</div>
                    <ul class="subMenu subMenu2">
                        <li><a href="../html/PORTFOLIO.html">DESIGN CONCEPT</a></li>
                        <li><a href="../html/FURNITURE.html">FURNITURE</a></li>
                    </ul>
                </li>
                <li class="headMenuBtn">
                    <div><a href="../html/gallery.html">GALLERY</a></div>
                </li>
                <li class="headMenuBtn">
                    <div><a href="../html/Q&A.html">REVIEW</a></div>
                </li>
                <li class="headMenuBtn">
                    <div>CONTACT</div>
                    <ul class="subMenu subMenu4">
                        <li><a href="https://www.instagram.com/heyday_seoil" target="_blank">INSTAGRAM</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </header>
    <!-- header 구역 -->
    
    <section>
        <div id = 'galleryText'>
            <p class="galleryTitle">Welcome to the Gallery World</p>
            <p class="galleryContents">Embark on a visual journey with us as we showcase the moments captured in time.</p>
            <p class="galleryContents">Each photograph tells a unique story, weaving together the threads of our shared experiences and memories.</p>
            <p class="galleryContents">Explore the artistry, emotions, and narratives behind each image, and join us in celebrating the beauty of life through the lens.</p>
        </div>
        
        <div id="categoryList">
            <a id="materialMuseum" href="#" onclick="showCategory('materialMuseum');" class="active">
                <img src="../img/materialMuseum.png" alt="Material Museum">
                <span class="category-description">Explore Material Museum</span>
                Material Museum
            </a>
        
            <a id="designSelection" href="#" onclick="showCategory('designSelection')" class="active">
                <img src="../img/designSelection.png" alt="Design Process" width="100" height="100">
                <span class="category-description">Discover Design Process</span>
                Design Process
            </a>
        
            <a id="productionProcess" href="#" onclick="showCategory('productionProcess')" class="active">
                <img src="../img/productionProcess.png" alt="Production Process" width="100" height="100">
                <span class="category-description">Learn about Production Process</span>
                Production Process
            </a>
        
            <a id="video" href="#" onclick="showCategory('video')" class="active">
                <img src="../img/video.png" alt="Video" width="100" height="100">
                <span class="category-description">Watch Videos</span>
                Video
            </a>
        </div>
        <div class="gallery" id="imageGallery"></div>
    </section>

    <!-- footer 구역 -->
    <footer id="foot">
        <div class="inBox">
            <div class="footLogo">
                <img src="../img/logo_2.png" alt="logo">
                <h1>HEYDAY</h1>
                <p>to save the Earth</p>
            </div>

            <div class="footData">
                <p>
                    HEYDAY<br>
                    02-490-7300<br>
                    28, Yongmasan-ro 90-gil, Jungnang-gu, Seoul, Republic of Korea
                </p>
                <h1>2023. HEYDAY Co. all rights reserved</h1>
            </div>

            <div class="footLine"></div>

            <div class="sns">
                <div class="instar">
                    <a href="https://www.instagram.com/heyday_seoil">
                        <img src="../img/instarIcon.png" alt="instarIcon">
                        <img src="../img/instarText.png" alt="instarText">
                    </a>
                </div>
            </div>

        </div>
    </footer>
    <!-- footer 구역 -->

    <!-- 스크립트 부분 수정 -->
    <script>
    // 이미지 파일 이름을 배열로 저장
    var materialMuseum = [];
    for (var i = 1; i <= 11; i++) {
        materialMuseum.push('materialMuseum (' + i + ').jpg');
    }

    var designSelection = [];
    for (var i = 1; i <= 9; i++) {
        designSelection.push('designSelection (' + i + ').jpg');
    }

    var productionProcess = [];
    for (var i = 1; i <= 14; i++) {
        productionProcess.push('productionProcess (' + i + ').jpg');
    }

    var video = [];
    for (var i = 1; i <= 4; i++) {
        video.push('video (' + i + ').mp4');
    }
    var currentImageIndex = 0;
    var categoryImages = getCategoryImages(category);
    var category;
    // 이미지 변경 함수 수정
    function changeImage(step) {
        currentImageIndex += step;
        if (currentImageIndex < 0) {
            currentImageIndex = categoryImages.length - 1;
        } else if (currentImageIndex >= categoryImages.length) {
            currentImageIndex = 0;
        }
        updateModalImage();
    }

    // 모달의 이미지 업데이트
    function updateModalImage() {
        var modalImg = document.getElementById('modalImg');
        modalImg.src = '../img/' + currentCategory + '/' + categoryImages[currentImageIndex];
    }


    window.scrollTo({ top: 0, behavior: 'smooth' });
    // 카테고리 클릭 시 해당 카테고리의 이미지를 표시
    function showCategory(category) {
        var categoryLinks = document.querySelectorAll('#categoryList a');
        categoryLinks.forEach(function (link) {
            link.classList.remove('active');
        });
        document.getElementById(category).classList.add('active');
        document.getElementById('categoryList').addEventListener('click', function () {
            // galleryTitle, galleryContents 숨기기
            document.getElementById('galleryText').style.transform = 'translateY(-300px)';
            document.getElementById('categoryList').style.transform = 'translateY(-250px)';
            document.getElementById('categoryList').style.opacity = '1'; // 투명도를 0으로 설정
            // 갤러리 보이도록 스타일 변경
            document.getElementById('imageGallery').style.transform = 'translateY(-100px)';
            document.getElementById('imageGallery').style.opacity = '1'; // 투명도를 1로 설정

            // 추가로 필요한 동작 수행 (예: showCategory 함수 호출)
        });

        // 나타나는 효과를 위한 setTimeout 사용
        setTimeout(function () {
            currentCategory = category;
            categoryImages = getCategoryImages(category);
            // 갤러리 동적으로 추가
            var modalGallery = document.getElementById('imageGallery');
            modalGallery.innerHTML = ''; // 기존 갤러리 내용 초기화

            var imageCount = categoryImages.length;
            var loadedImages = 0;
            function fadeInImage(imageElement, delay) {
                var opacity = 0;
                imageElement.style.opacity = opacity;

                var startTime;
                function animate(currentTime) {
                    if (!startTime) startTime = currentTime;
                    var elapsed = currentTime - startTime;
                    opacity = elapsed / 1500; // 1000ms 동안 페이드인
                    imageElement.style.opacity = Math.min(opacity, 1);
                    if (opacity < 1) {
                        requestAnimationFrame(animate);
                        
                    }
                }

                setTimeout(function () {
                    requestAnimationFrame(animate);
                }, delay);
                
            }

            categoryImages.forEach(function (file, index) {
                var galleryItem = document.createElement('a');
                galleryItem.className = 'gallery-item';
                galleryItem.href = '../img/' + category + '/' + file;
                galleryItem.setAttribute('data-fancybox', 'gallery'); // Fancybox에 필요한 속성 추가
                galleryItem.setAttribute('data-thumb', '../img/' + category + '/' + file);

                var description = document.createElement('div');
                description.className = 'image-description';
                description.textContent = getCategoryImageDescription(category, index);
                galleryItem.appendChild(description);

                if (file.endsWith('.mp4')) {
                    // 동영상
                    var thumbnail = document.createElement('video');
                    thumbnail.src = '../img/' + category + '/' + file // 실제 썸네일 이미지로 대체
                    thumbnail.alt = category + ' Video ' + (index + 1);
                    fadeInImage(thumbnail, index * 100);
                    galleryItem.appendChild(thumbnail);
                }
                else {
                    var image = document.createElement('img');
                    image.src = '../img/' + category + '/' + file;
                    image.alt = category + ' Image ' + (index + 1);
                    image.onload = function () {
                        loadedImages++;
                        if (loadedImages === imageCount) {
                            // 모든 이미지가 로드된 후에 Masonry 초기화
                            initializeMasonry();
                            
                        }
                    };
                    fadeInImage(image, index * 100);
                    galleryItem.appendChild(image);
                }

                modalGallery.appendChild(galleryItem);
                
            });

            // Masonry 초기화 함수
            function initializeMasonry() {
                // Masonry 초기화
                var masonry = new Masonry(modalGallery, {
                    itemSelector: '.gallery-item',
                    columnWidth: '.gallery-item',
                    fitWidth: true, // 플루이드 레이아웃을 사용하려면 true로 설정
                });
                applyHoverStyles();
                // 이미지가 로드된 후에 Masonry 초기화
                imagesLoaded(modalGallery, function () {
                    masonry.layout();
                });
                videosLoaded(thumbnail, function () {
                    masonry.layout();
                });
            }
        }, 500); // 0.5초 후에 실행 (트랜지션 시간과 맞춤)
    }
    // 카테고리 숨기기 함수
    function hideCategory() {
        // galleryTitle, galleryContents 보이기
        var galleryTitle = document.querySelector('.galleryTitle');
        var galleryContents = document.querySelectorAll('.galleryContents');
        var imageGallery = document.getElementById('imageGallery');

        // galleryTitle, galleryContents 보이기
        document.getElementById('galleryText').style.transform = 'translateY(0)';
        document.getElementById('categoryList').style.transform = 'translateY(0)';

        // 갤러리 숨기기
        document.getElementById('imageGallery').style.opacity = '0'; // 투명도를 0으로 설정
        document.getElementById('imageGallery').style.transform = 'translateY(0)';
        categoryListTransformed = false;
        // 추가로 필요한 동작 수행
    }
    // 초기 상태 저장
    var initialCategory = 'materialMuseum';
    var scrolled = false;
    var first = true;
    // 스크롤 이벤트 핸들러
    function handleScroll() {
        // 현재 스크롤 위치 가져오기
        var scrollPosition = window.scrollY || document.documentElement.scrollTop;
        console.log('Scrolling...');
        // 일정 스크롤 위치에서 showCategory 또는 hideCategory 호출
        if (scrollPosition > 50 && !scrolled) {
            console.log('확인문구')
            
            document.getElementById('galleryText').style.transform = 'translateY(-300px)';
            document.getElementById('categoryList').style.transform = 'translateY(-250px)';
            document.getElementById('imageGallery').style.opacity = '1';
            document.getElementById('imageGallery').style.transform = 'translateY(-100px)';
            scrolled = true;
        } else if (scrollPosition <= 50 && scrolled) {
            console.log('확인문구')
            scrolled = false;
            hideCategory();
        }
    }

    document.addEventListener('DOMContentLoaded', function () {
        // 스크롤 이벤트에 핸들러 연결
        window.addEventListener('scroll', handleScroll);
        
    });
    // 카테고리에 따라 이미지 배열 반환
    function getCategoryImages(category) {
        switch (category) {
            case 'materialMuseum':
                return materialMuseum;
            case 'designSelection':
                return designSelection;
            case 'productionProcess':
                return productionProcess;
            case 'video':
                return video;
            default:
                return [];
        }
    }

    // 모달 열기 함수 수정
    function openModal(index) {
        // Use Fancybox to open the modal
        $("[data-fancybox='gallery']").eq(index).trigger("click");
    }

    // 모달 닫기 함수 수정
    function closeModal() {
        var modal = document.getElementById('myModal');
        modal.style.display = 'none';
    }
    
    // 이미지에 마우스 호버 이벤트 추가
    function applyHoverStyles() {
        var galleryItems = document.querySelectorAll('.gallery-item');

        galleryItems.forEach(function (item) {
            item.addEventListener('mouseenter', function () {
                var description = item.querySelector('.image-description');
                var imageElement = item.querySelector('img');
                var divElement = item.querySelector('div');

                if (imageElement.style.opacity !== '1') {
                    imageElement.style.opacity = '1';
                    divElement.style.opacity = '1';
                }
                description.style.opacity = '1';
            });

            item.addEventListener('mouseleave', function () {
                var description = item.querySelector('.image-description');
                var imageElement = item.querySelector('img');
                var divElement = item.querySelector('div');

                if (imageElement.style.opacity !== '1') {
                    imageElement.style.opacity = '1';
                    divElement.style.opacity = '1';
                }
                setTimeout(function () {
                    description.style.opacity = '1';
                }, 500); // 0.5초 딜레이
            });
        });
    }
    function getCategoryImageDescription(category, index) {
    // 실제 데이터에 따라 이미지에 대한 설명을 반환하는 코드
    var descriptions = {
        'materialMuseum': [
            'A meeting at the cafe.',
            'Bicycles and their disassembled components.',
            'Material exploration.',
            'A hanbok crafted by upcycling various fabrics.',
            'Small wooden pieces suitable for recycling.',
            'Upcycled cart and chair.',
            'Upcycled bench.',
            'Upcycled personal items crafted from various fabrics and leather materials.',
            'A robot crafted from upcycled plastic materials.',
            'Upcycled table and items.',
            'Upcycled table storage unit.',
            '',
            '',
            '',
            '',
        ],
        'designSelection': [
            'Upcycled chair transformed into a bookshelf.',
            'Various upcycling ideas for repurposing chairs.',
            'Upcycled chair with added drawer functionality and a table crafted from repurposed chairs.',
            'Upcycled storage cabinet made from chairs.',
            'Nature-inspired upcycled chair design.',
            'Initial chair CAD blueprint.',
            'Upcycled chair with added drawer functionality and a table crafted from repurposed chairs.',
            'Upcycled chair transformed into a flower pot.',
            "Our team's initial concept and storytelling.",
            '',
            '',
            '',
            '',
            '',
            // ... 추가 이미지에 대한 설명 ...
        ],
        'productionProcess': [
            'The initial materials used for creating a chair.',
            'Dismantling a chair for creating a new item.',
            'Sanding the chair with sandpaper in preparation for painting.',
            'The disassembled parts of the fully sanded chair.',
            'The materials for renewing the chair.',
            'Painting the components of the chair.',
            'The chair components after completing the painting process.',
            'Assembling and securing the components back together.',
            'Soaking rattan in water.',
            'Crafting the chair by weaving rattan onto it.',
            'Capturing moments of togetherness.',
            'Creating macramé crafts to weave onto the chair.',
            'The finished look of the chair with intricately woven rattan craftsmanship.',
            'The finished upcycled shelf.',
            '',
            '',
            '',
            // ... 추가 이미지에 대한 설명 ...
        ],
        'video': [
            'Coating process.',
            'Painting process.',
            'Parts sanding process.',
            'Initial sanding process.',
            // ... 추가 동영상에 대한 설명 ...
        ]
    };

    // 현재 카테고리와 이미지 인덱스에 해당하는 설명 반환
    return descriptions[category][index] || '';
}

    $(document).ready(function () {
        $('[data-fancybox="gallery"]').fancybox({
            // Add Fancybox options here if needed
            loop: true,
            transitionEffect: 'slide',
            buttons: [
                "slideShow",
                "thumbs",
                "zoom",
                "fullScreen",
                "close"
            ],
            thumbs: {
                autoStart: true, // Thumbnails를 자동으로 시작
                axis: 'y', // Thumbnails의 방향 (x 또는 y)
            },
            
        });
    });
</script>

</body>

</html>